<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>健康饮食 - 首页</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <style>
    /* 轮播动画 */
    .fade-in {
      animation: fadeIn 0.8s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* 天气组件 - 强制同一行 */
    .weather-wrap {
      display: flex;
      align-items: center;
      gap: 4px; /* 图标和文字间距 */
      font-size: 14px;
      color: #1e293b;
      font-weight: 500;
    }
    .weather-icon {
      font-size: 16px;
      line-height: 1; /* 消除行高影响 */
    }
    .weather-text {
      line-height: 1; /* 消除行高影响 */
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#22c55e',
            secondary: '#f97316',
            neutral: '#f8fafc',
            dark: '#1e293b',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
</head>
<body class="bg-neutral min-h-screen flex flex-col">
  <!-- 导航栏 -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3">
      <div class="flex justify-between items-center">
        <a href="index.html" class="text-2xl font-bold text-primary">健康饮食</a>
        
        <!-- 桌面导航 -->
        <div class="hidden md:flex space-x-6">
          <a href="index.html" class="text-dark hover:text-primary font-medium">首页</a>
          <a href="diet-advice.html" class="text-dark hover:text-primary font-medium">饮食建议</a>
          <a href="recipe-library.html" class="text-dark hover:text-primary font-medium">食谱库</a>
          <a href="calorie-calculator.html" class="text-dark hover:text-primary font-medium">卡路里计算</a>
          <a href="diet-record.html" class="text-dark hover:text-primary font-medium">饮食记录</a>
          <a href="community.html" class="text-dark hover:text-primary font-medium">美食社区</a>
        </div>
        
        <!-- 用户操作 + 天气组件容器 -->
        <div class="flex flex-col items-end gap-2">
          <!-- 登录/注册按钮 -->
          <div class="flex items-center gap-4">
            <a href="login.html" class="hidden md:block text-dark hover:text-primary font-medium">登录</a>
            <a href="register.html" class="hidden md:block bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition">注册</a>
            <!-- 移动端菜单按钮 -->
            <button id="menuBtn" class="md:hidden text-dark text-xl">
              <i class="fa fa-bars"></i>
            </button>
          </div>
          
          <!-- 天气组件 - 强制同一行 -->
          <div class="weather-wrap">
            <span class="weather-icon">🌤️</span>
            <span class="weather-text">正在定位...</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 移动端导航菜单 -->
    <div id="mobileMenu" class="md:hidden hidden bg-white shadow-lg absolute w-full">
      <div class="container mx-auto px-4 py-3 flex flex-col gap-4">
        <a href="index.html" class="text-dark hover:text-primary font-medium py-2 border-b">首页</a>
        <a href="diet-advice.html" class="text-dark hover:text-primary font-medium py-2 border-b">饮食建议</a>
        <a href="recipe-library.html" class="text-dark hover:text-primary font-medium py-2 border-b">食谱库</a>
        <a href="calorie-calculator.html" class="text-dark hover:text-primary font-medium py-2 border-b">卡路里计算</a>
        <a href="diet-record.html" class="text-dark hover:text-primary font-medium py-2 border-b">饮食记录</a>
        <a href="community.html" class="text-dark hover:text-primary font-medium py-2 border-b">美食社区</a>
        <div class="flex gap-4 pt-2">
          <a href="login.html" class="text-dark hover:text-primary font-medium">登录</a>
          <a href="register.html" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition">注册</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 健康食物轮播图 -->
  <section class="relative h-[500px] md:h-[600px] overflow-hidden">
    <div id="carousel" class="h-full w-full">
      <div class="carousel-item active h-full w-full">
        <img src="images/food1.jpg" alt="新鲜蔬果" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
          <div class="text-center text-white px-4 fade-in">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">新鲜蔬果 健康之源</h2>
            <p class="text-xl md:text-2xl mb-6 max-w-2xl mx-auto">每日摄入足量蔬果，补充维生素与膳食纤维</p>
            <a href="diet-advice.html" class="bg-primary text-white px-6 py-3 rounded-lg text-lg hover:bg-primary/90 transition">查看饮食建议</a>
          </div>
        </div>
      </div>
      <div class="carousel-item h-full w-full">
        <img src="images/food2.jpg" alt="均衡膳食" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
          <div class="text-center text-white px-4 fade-in">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">均衡膳食 科学搭配</h2>
            <p class="text-xl md:text-2xl mb-6 max-w-2xl mx-auto">合理搭配主食、蛋白质、蔬果，打造健康饮食结构</p>
            <a href="recipe-library.html" class="bg-primary text-white px-6 py-3 rounded-lg text-lg hover:bg-primary/90 transition">浏览食谱库</a>
          </div>
        </div>
      </div>
      <div class="carousel-item h-full w-full">
        <img src="images/food3.jpg" alt="营养管理" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
          <div class="text-center text-white px-4 fade-in">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">智能管理 营养均衡</h2>
            <p class="text-xl md:text-2xl mb-6 max-w-2xl mx-auto">记录饮食摄入，生成个性化营养报告</p>
            <a href="diet-record.html" class="bg-primary text-white px-6 py-3 rounded-lg text-lg hover:bg-primary/90 transition">记录饮食</a>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 轮播控制按钮 -->
    <button id="prevBtn" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/30 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/50 transition">
      <i class="fa fa-chevron-left"></i>
    </button>
    <button id="nextBtn" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/30 text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/50 transition">
      <i class="fa fa-chevron-right"></i>
    </button>
    
    <!-- 轮播指示器 -->
    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3">
      <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50 active:bg-white" data-index="0"></button>
      <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50" data-index="1"></button>
      <button class="carousel-indicator w-3 h-3 rounded-full bg-white/50" data-index="2"></button>
    </div>
  </section>

  <!-- 核心功能介绍 -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 text-dark">核心功能</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- 功能卡片1 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-calculator text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">卡路里计算</h3>
          <p class="text-gray-600 mb-4">输入食物名称和重量，快速计算卡路里及营养成分</p>
          <a href="calorie-calculator.html" class="text-primary font-medium hover:underline">立即计算 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
        
        <!-- 功能卡片2 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-book text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">海量食谱库</h3>
          <p class="text-gray-600 mb-4">数千种健康食谱，按热量、菜系、食材分类，满足不同需求</p>
          <a href="recipe-library.html" class="text-primary font-medium hover:underline">浏览食谱 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
        
        <!-- 功能卡片3 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-bar-chart text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">营养报告</h3>
          <p class="text-gray-600 mb-4">自动生成每日营养素摄入比例报告，掌握饮食健康状况</p>
          <a href="diet-record.html" class="text-primary font-medium hover:underline">查看报告 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
        
        <!-- 功能卡片4 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-comments text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">美食社区</h3>
          <p class="text-gray-600 mb-4">与志同道合的朋友交流健康饮食心得，分享美食制作经验</p>
          <a href="community.html" class="text-primary font-medium hover:underline">加入社区 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
        
        <!-- 功能卡片5 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-lightbulb-o text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">饮食建议</h3>
          <p class="text-gray-600 mb-4">专业营养师提供的个性化饮食建议，科学指导健康饮食</p>
          <a href="diet-advice.html" class="text-primary font-medium hover:underline">查看建议 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
        
        <!-- 功能卡片6 -->
        <div class="bg-neutral rounded-xl shadow-md hover:shadow-lg transition p-6">
          <div class="w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mb-4">
            <i class="fa fa-calendar text-2xl text-primary"></i>
          </div>
          <h3 class="text-xl font-bold mb-3 text-dark">饮食记录</h3>
          <p class="text-gray-600 mb-4">轻松记录每日饮食，追踪饮食习惯，逐步改善饮食结构</p>
          <a href="diet-record.html" class="text-primary font-medium hover:underline">开始记录 <i class="fa fa-arrow-right ml-1"></i></a>
        </div>
      </div>
    </div>
  </section>

  <!-- 健康饮食小贴士 -->
  <section class="py-16 bg-primary/5">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12 text-dark">健康饮食小贴士</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <div class="flex items-start gap-4">
          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1">
            <i class="fa fa-check text-white"></i>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-2 text-dark">规律三餐</h3>
            <p class="text-gray-600">定时定量进食，避免暴饮暴食，保持血糖稳定</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4">
          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1">
            <i class="fa fa-check text-white"></i>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-2 text-dark">多喝水</h3>
            <p class="text-gray-600">每天饮用1500-2000ml水，促进新陈代谢</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4">
          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1">
            <i class="fa fa-check text-white"></i>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-2 text-dark">少油少盐</h3>
            <p class="text-gray-600">每日盐摄入量不超过5g，油摄入量不超过25g</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4">
          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center flex-shrink-0 mt-1">
            <i class="fa fa-check text-white"></i>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-2 text-dark">粗细搭配</h3>
            <p class="text-gray-600">主食中加入粗粮，增加膳食纤维摄入</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 页脚 -->
  <footer class="bg-dark text-white mt-auto">
    <div class="container mx-auto px-4 py-12">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-xl font-bold mb-4 text-primary">健康饮食</h3>
          <p class="text-gray-400 mb-4">关注饮食健康，享受美好生活</p>
          <div class="flex gap-4">
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-weixin text-xl"></i></a>
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-weibo text-xl"></i></a>
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-qq text-xl"></i></a>
          </div>
        </div>
        
        <div>
          <h3 class="text-xl font-bold mb-4">快速链接</h3>
          <ul class="flex flex-col gap-2">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition">首页</a></li>
            <li><a href="diet-advice.html" class="text-gray-400 hover:text-white transition">饮食建议</a></li>
            <li><a href="recipe-library.html" class="text-gray-400 hover:text-white transition">食谱库</a></li>
            <li><a href="community.html" class="text-gray-400 hover:text-white transition">美食社区</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-xl font-bold mb-4">功能服务</h3>
          <ul class="flex flex-col gap-2">
            <li><a href="calorie-calculator.html" class="text-gray-400 hover:text-white transition">卡路里计算</a></li>
            <li><a href="diet-record.html" class="text-gray-400 hover:text-white transition">饮食记录</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">营养报告</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">个性化推荐</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-xl font-bold mb-4">联系我们</h3>
          <ul class="flex flex-col gap-2">
            <li class="text-gray-400"><i class="fa fa-phone mr-2"></i> 400-123-4567</li>
            <li class="text-gray-400"><i class="fa fa-envelope mr-2"></i> contact@healthdiet.com</li>
            <li class="text-gray-400"><i class="fa fa-map-marker mr-2"></i> 北京市朝阳区健康大厦</li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
        <p>© 2025 健康饮食 版权所有 | 京ICP备12345678号</p>
      </div>
    </div>
  </footer>

  <script>
    // 移动端菜单切换
    document.getElementById('menuBtn').addEventListener('click', function() {
      const mobileMenu = document.getElementById('mobileMenu');
      mobileMenu.classList.toggle('hidden');
    });

    // 轮播图逻辑
    const carouselItems = document.querySelectorAll('.carousel-item');
    const indicators = document.querySelectorAll('.carousel-indicator');
    let currentIndex = 0;

    function showSlide(index) {
      // 隐藏所有轮播项
      carouselItems.forEach(item => {
        item.classList.remove('active');
        item.style.display = 'none';
      });
      // 重置所有指示器
      indicators.forEach(indicator => indicator.classList.remove('active:bg-white', 'bg-white'));
      
      // 处理边界
      if (index >= carouselItems.length) currentIndex = 0;
      if (index < 0) currentIndex = carouselItems.length - 1;
      
      // 显示当前轮播项
      carouselItems[currentIndex].classList.add('active');
      carouselItems[currentIndex].style.display = 'block';
      // 激活当前指示器
      indicators[currentIndex].classList.add('active:bg-white', 'bg-white');
    }

    // 下一张/上一张
    document.getElementById('nextBtn').addEventListener('click', () => {
      currentIndex++;
      showSlide(currentIndex);
    });
    document.getElementById('prevBtn').addEventListener('click', () => {
      currentIndex--;
      showSlide(currentIndex);
    });

    // 指示器点击
    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        currentIndex = index;
        showSlide(currentIndex);
      });
    });

    // 自动轮播
    setInterval(() => {
      currentIndex++;
      showSlide(currentIndex);
    }, 5000);

    // 初始化显示第一张
    showSlide(currentIndex);
  </script>
  
  <!-- 天气定位脚本 -->
  <script>
    // 替换为你的高德API密钥
    const AMAP_KEY = "b3749fc33234417223bae75de88405a8";

    // 天气图标映射
    const weatherIconMap = {
      '晴': '☀️', '多云': '⛅', '阴': '☁️', '小雨': '🌧️', '中雨': '🌧️', 
      '大雨': '🌧️', '雪': '❄️', '雷阵雨': '⛈️', '雾': '🌫️', '大风': '💨'
    };

    // 1. 获取设备经纬度
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (pos) => {
            const lng = pos.coords.longitude;
            const lat = pos.coords.latitude;
            getCityByLngLat(lng, lat);
          },
          (err) => {
            console.log("定位权限拒绝/失败：", err.message);
            getWeatherByCityCode("110000"); // 兜底用北京
          },
          { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
        );
      } else {
        updateWeatherUI("北京", "7℃", "晴");
      }
    }

    // 2. 经纬度转城市编码
    function getCityByLngLat(lng, lat) {
      const geoUrl = `https://restapi.amap.com/v3/geocode/regeo?key=${AMAP_KEY}&location=${lng},${lat}&radius=1000&extensions=base`;
      fetch(geoUrl)
        .then(res => res.json())
        .then(data => {
          if (data.status === "1") {
            const adcode = data.regeocode.addressComponent.adcode;
            getWeatherByCityCode(adcode);
          } else {
            getWeatherByCityCode("110000");
          }
        })
        .catch(() => getWeatherByCityCode("110000"));
    }

    // 3. 城市编码查天气
    function getWeatherByCityCode(adcode) {
      const weatherUrl = `https://restapi.amap.com/v3/weather/weatherInfo?key=${AMAP_KEY}&city=${adcode}&extensions=base`;
      fetch(weatherUrl)
        .then(res => res.json())
        .then(data => {
          if (data.status === "1" && data.lives.length > 0) {
            const live = data.lives[0];
            updateWeatherUI(live.city, live.temperature + "℃", live.weather);
          } else {
            updateWeatherUI("北京", "7℃", "晴");
          }
        })
        .catch(() => updateWeatherUI("北京", "7℃", "晴"));
    }

    // 4. 更新天气显示（强制同一行）
    function updateWeatherUI(city, temp, weather) {
      const icon = weatherIconMap[weather] || "🌤️";
      document.querySelector(".weather-icon").textContent = icon;
      document.querySelector(".weather-text").textContent = `${city} ${temp} ${weather}`;
    }

    // 页面加载后启动定位
    window.onload = getLocation;
  </script>
</body>
</html>